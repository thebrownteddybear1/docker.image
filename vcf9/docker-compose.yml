services:
  vcf-manager:
    build: .
    container_name: vcf-v9-manager
    hostname: depot.vcf-gcp.broadcom.net
    
    privileged: true
    cap_add:
      - NET_ADMIN
    devices:
      - "/dev/net/tun:/dev/net/tun"

    ports:
      - "2222:22"
      - "80:80"
      - "443:443"

    volumes:
      # Keep this one so your actual VCF downloads are safe on the host
      - ./depot_data:/depot
      # We removed the tonjiak mapping to prevent hiding the image files

    environment:
      - DepotTier=Staging
      - ProductionUserEmail=svc.config-infra@broadcom.com

    restart: unless-stopped
    stdin_open: true
    tty: true

networks:
  default:
    name: vcf_network