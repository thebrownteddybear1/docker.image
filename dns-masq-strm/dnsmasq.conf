# Basic configuration
port=53
bind-interfaces
listen-address=0.0.0.0,127.0.0.1,172.20.0.2

# Don't forward plain names (without a dot or domain part)
domain-needed

# Don't forward reverse lookups for local networks
bogus-priv

# Never forward addresses in the non-routed address spaces
bogus-priv

# Add custom hosts file for static DNS entries
addn-hosts=/etc/dnsmasq-hosts

# UPSTREAM DNS SERVERS - used when not found in custom-hosts
# Use 192.168.50.1 as primary, then 1.1.1.1, then 8.8.8.8 as fallbacks
server=192.168.50.1
server=1.1.1.1
server=8.8.8.8

# Don't use /etc/resolv.conf or other system DNS settings
no-resolv

# Clear any existing DNS servers (use only the ones we specify above)
no-hosts  # This prevents reading /etc/hosts, but we use addn-hosts

# Cache settings (improves performance)
cache-size=1000
local-ttl=300

# Logging
log-queries
log-facility=-

# Optional: DHCP configuration (if you need it)
# dhcp-range=172.20.0.100,172.20.0.200,12h
# dhcp-option=option:router,172.20.0.1
# dhcp-option=option:dns-server,172.20.0.2