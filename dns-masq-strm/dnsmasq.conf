# Basic configuration
port=53

# CHANGE THIS: Use bind-dynamic instead of bind-interfaces
# This allows dnsmasq to wait for the IP to become available
bind-dynamic

# CHANGE THIS: Listen on ALL interfaces inside the container
# This is safe because Docker isolation handles the rest
listen-address=0.0.0.0,127.0.0.1

# Don't forward plain names
domain-needed

# Don't forward reverse lookups for local networks
bogus-priv

# Add custom hosts file
addn-hosts=/etc/dnsmasq-hosts

# UPSTREAM DNS SERVERS
server=192.168.50.1
server=1.1.1.1
server=8.8.8.8

# Important for VCF: Allow queries from your Nested ESXi subnets
# Without this, dnsmasq might ignore queries from outside the 172.22.0.0 range
local-service=0

no-resolv
no-hosts
cache-size=1000
local-ttl=300
log-queries
log-facility=-